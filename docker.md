# Docker

- docker search имя_образа (ubuntu)

- docker tag image_id account_name/image_name:version_or_tag

- docker login
регистрация на Docker Hub

- docker pull имя_образа
получение образа из docker registry

- docker run -d имя_образа команда_которая_будет_выполняться_в_контейнере

- docker ps -l
последний контейнер

- docker ps -a
посмотреть все "мусорные" контейнеры

- docker ps
список всех запущенных процессов

- docker commit ID_контейнера имя_нового_образа

- docker inspect ID_контейнера
посмотреть детали контейнера

- docker images
список всех образов на этом хосте

- docker info

- docker run --name имя_нового_образа (habr) -i -t имя_образа (ubuntu)  /bin/bash

- docker attach имя_образа

- docker logs ID_контейнера/имя_контейнера

- docker stop/kill/start ID_контейнера/имя_контейнера

- docker rm ID_контейнера
удалить не нужные контейнеры

- docker cp путь_к_данным_на_хосте имя_контейнера : путь

- docker run -v /tmp:/root -t -i имя_образа (ubuntu)

- docker push имя_пользователя/имя_образа
отправка образа в docker registry

- docker exec ID_контейнера/имя_образа
команда для подключения к docker-контейнеру

- docker save -o имя_образа.img имя_образа

- docker load -i имя_образа.img

- docker build -t имя_нового_образа путь_к_dockerfile

- docker rmi -f IMAGE_ID

- docker history имя_образа
история формирования слоев образа

- docker stats Имя/ID-контейнера
статистику использования ресурсов

> -d — «демонизирует» контейнер, то есть просто отключает Docker от STDOUT виртуального окружения и позволяет ему работать в фоне;
--name — имя контейнера, которое он получит вместо идентификатора;
-e — позволяет «пробросить» в виртуалку переменную окружения;
-v — пробрасывает указанный файл или каталог (формат /файл/на/хост/системе:/файл/в/виртуалке или просто /файл/на/хост/системе, если пути совпадают).
-i (STDIN) 
-t (терминал)
-p порт_контейнера:порт_хоста  --restart=always перезапуск контейнера в случае падения
--rm запуск контейнера с удалением его по завершению оного
-m 256m ограничение контейнера в 256 МБ ОЗУ
-с 1024 задать вес контейнера с [1; 1024]; 1024 - max
--cpuset="0,1" ограничить контейнер первыми двумя ядрами

> FROM <имя-образа> — какой образ использовать в качестве базы (должна быть первой строкой в любом Dockerfile).
MAINTAINER <имя> — имя мантейнера данного Dockerfile.
RUN <команда> — запустить указанную команду внутри контейнера.
CMD <команда> — выполнить команду при запуске контейнера (обычно идет последней).
EXPOSE <порт> — список портов, которые будет слушать контейнер (используется механизмом линковки).
ENV <ключ> <значение> — создать переменную окружения.
ADD <путь> <путь> — скопировать файл/каталог внутрь контейнера/образа (первый аргумент может быть URL).
ENTRYPOINT <команда> — команда для запуска приложения в контейнере (по умолчанию /bin/sh -c).
VOLUME <путь> — пробросить в контейнер указанный каталог (аналог опции -v).
USER <имя> — сменить юзера внутри контейнера.
WORKDIR <путь> — сменить каталог внутри контейнера.
ONBUILD [ИНСТРУКЦИЯ] — запустить указанную инструкцию Dockerfile только в том случае, если образ используется для сборки другого образа (с помощью FROM).

> docker RESTful API tcp:2375, 2376

> Docker Compose - утилита для объединения нескольких контейнеров в одно веб-приложение. Docker Compose удобен для создания приложений, в которых несколько контейнеров объединены и именно совместно представляют собой разрабатываемое приложение.

> Docker Swarm служит для объединения множества Docker хостов в один виртуальный хост и делает это элегантно.